{% extends 'ECAdminFincasBundle::layout_comunidad.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('css/table.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('css/boton_acciones.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% block javascripts %}
		{{ parent() }}
<script type='text/javascript' src="{{ asset('js/jquery.js') }}"></script>    
<script type='text/javascript' src="{{ asset('js/jquery.dataTables.js') }}"></script>  
<script type='text/javascript' src="{{ asset('js/boton_acciones.js') }}"></script>    
<script type="text/javascript" charset="utf-8">
			$(document).ready(function() {
				$('#example').dataTable();
			} );
</script>
{% endblock %}

{% block colder %}
{{ parent() }}
	{% for flashMessage in app.session.flashbag.get('notice') %}
			{% for flashColor in app.session.flashbag.get('color') %}
    			<div class="flash-notice mensaje" style="color:{{flashColor}}; border-color:{{flashColor}};">
        		{{ flashMessage }}
    			</div>
    		{% endfor %}
	{% endfor %}

<div class="subtitulo izquierda">Listado de propietarios</div>
<a href="{{ path('ec_adminfincas_comunidad_listado_propietarios_pdf', { 'cif': comunidad.cif }) }}"><img src="/images/pdf-icon.png" alt="pdf"></a>
<a href="{{ path('ec_adminfincas_comunidad_listado_propietarios_csv', { 'cif': comunidad.cif }) }}"><img src="/images/csv-icon.png" alt="csv"></a>
<div id="demo">
		<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
			<thead>
				<tr>
					<th>Tipo</th>
					<th>Nombre</th>
					<th>Bloque</th>
					<th>Piso</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
			{% for bloque in bloques %}
				{% for propiedad in bloque.propiedades%}
					<tr class="gradeX">
       				<td>{{propiedad.propietario.tipo}}</td>
       				<td>{{propiedad.propietario.nombre}}</td>
       				<td>{{bloque.direccion}}</td>
       				<td>{{propiedad.piso}}</td>
       				<td>
       					<a href="{{ path('ec_adminfincas_comunidad_eliminar_propietario', { 'cif': comunidad.cif, 'id':propiedad.propietario.id}) }}" onclick="return confirm('¿Estás seguro de eliminar a {{propiedad.propietario.nombre}}?')"><img src="/images/action-cancel-icon.png"></a>
							<ul id="sddm">
    							<li><a href="" onmouseover="mopen({{propiedad.propietario.id}})" onmouseout="mclosetime()">Acciones</a>
        							<div id="{{propiedad.propietario.id}}" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
        							<a href="{{ path('ec_adminfincas_nombrar_presidente', { 'cif' : comunidad.cif, 'id': propiedad.propietario.id}) }}" onclick="return confirm('¿Estás seguro de nombrar a {{propiedad.propietario.nombre}} como nuevo presidente?')">Nombrar Presidente</a>
        							<a href="{{ path('ec_adminfincas_nombrar_vicepresidente', { 'cif' : comunidad.cif, 'id': propiedad.propietario.id}) }}" onclick="return confirm('¿Estás seguro de nombrar a {{propiedad.propietario.nombre}} como nuevo vicepresidente?')">Nombrar Vicepresidente</a>
        							</div>
    							</li>
							</ul>
							<div style="clear:both"></div>
       				</td>
      			</tr>
      		{% endfor %} 
			{% endfor %}
			</tbody>
			<tfoot>
				<tr>
					<th>Tipo</th>
					<th>Nombre</th>
					<th>Portal</th>
					<th>Piso</th>
					<th>Acciones</th>
				</tr>
			</tfoot>
		</table>
</div>

{% endblock %}
